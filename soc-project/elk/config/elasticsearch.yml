# Elasticsearch Configuration
# Reference: https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html

# Cluster Settings
cluster.name: soc-cluster
node.name: elasticsearch
path.data: /usr/share/elasticsearch/data
path.logs: /usr/share/elasticsearch/logs

# Network Settings
network.host: 0.0.0.0
http.port: 9200
transport.port: 9300
discovery.type: single-node

# Memory Settings
bootstrap.memory_lock: true

# Security Settings
xpack.security.enabled: true
xpack.security.http.ssl:
  enabled: true
  key: /usr/share/elasticsearch/config/certs/elasticsearch.key
  certificate: /usr/share/elasticsearch/config/certs/elasticsearch.crt
  certificate_authorities: /usr/share/elasticsearch/config/certs/ca.crt

xpack.security.transport.ssl:
  enabled: true
  key: /usr/share/elasticsearch/config/certs/elasticsearch.key
  certificate: /usr/share/elasticsearch/config/certs/elasticsearch.crt
  certificate_authorities: /usr/share/elasticsearch/config/certs/ca.crt
  client_authentication: required
  verification_mode: certificate

# Index Settings
indices.memory.index_buffer_size: 10%
indices.query.bool.max_clause_count: 8192

# Search Settings
search.max_buckets: 100000

# Thread Pools
thread_pool:
  write:
    queue_size: 10000
  search:
    queue_size: 5000

# Caching
indices.queries.cache.size: 10%

# Recovery
cluster.routing.allocation.node_concurrent_recoveries: 2
cluster.routing.allocation.node_initial_primaries_recoveries: 4

# Snapshot
path.repo: /usr/share/elasticsearch/backup

# Watcher (if enabled)
xpack.watcher.enabled: false

# Monitoring
xpack.monitoring.enabled: true
xpack.monitoring.collection.enabled: true

# ML
xpack.ml.enabled: false

# License
xpack.license.self_generated.type: basic
